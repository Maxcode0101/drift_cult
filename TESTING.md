# Testing

## Code Validation

### HTML

| Directory | File | URL | Screenshot | Notes |
| --- | --- | --- | --- | --- |
| store | [home.html](https://github.com/Maxcode0101/drift_cult/blob/main/store/templates/store/home.html) | [https://driftcult.art/](https://driftcult.art/) | ![screenshot](documentation/validation/html-store-home.png) | ✅ Validated |
| store | [shop.html](https://github.com/Maxcode0101/drift_cult/blob/main/store/templates/store/shop.html) | [https://driftcult.art/store/shop/](https://driftcult.art/store/shop/) | ![screenshot](documentation/validation/html-store-shop.png) | ✅ Validated |
| store | [product_detail.html](https://github.com/Maxcode0101/drift_cult/blob/main/store/templates/store/product_detail.html) | [https://driftcult.art/store/product/4/](https://driftcult.art/store/product/4/) | ![screenshot](documentation/validation/store-product_detail.png) | ✅ Validated |
| store | [about.html](https://github.com/Maxcode0101/drift_cult/blob/main/store/templates/store/about.html) | [https://driftcult.art/about/](https://driftcult.art/about/) | ![screenshot](documentation/validation/html-store-about.png) | ✅ Validated |
| store | [contact.html](https://github.com/Maxcode0101/drift_cult/blob/main/core/templates/core/contact.html) | [https://driftcult.art/contact/](https://driftcult.art/contact/) | ![screenshot](documentation/validation/html-core-contact.png) | ✅ Validated |
| store | [community.html](https://github.com/Maxcode0101/drift_cult/blob/main/store/templates/store/community.html) | [https://driftcult.art/community/](https://driftcult.art/community/) | ![screenshot](documentation/validation/html-store-community.png) | ✅ Validated |
| store | [faq.html](https://github.com/Maxcode0101/drift_cult/blob/main/core/templates/core/faq.html) | [https://driftcult.art/faq/](https://driftcult.art/faq/) | ![screenshot](documentation/validation/html-core-faq.png) | ✅ Validated |
| store | [returns.html](https://github.com/Maxcode0101/drift_cult/blob/main/core/templates/core/returns.html) | [https://driftcult.art/returns/](https://driftcult.art/returns/) | ![screenshot](documentation/validation/html-core-returns.png) | ✅ Validated |
| store | [404.html](https://github.com/Maxcode0101/drift_cult/blob/main/store/templates/404.html) | [https://driftcult.art/thispagedoesnotexist/](https://driftcult.art/thispagedoesnotexist/) | ![screenshot](documentation/validation/html-store-404.png) | ✅ Validated |
| store | [cart.html](https://github.com/Maxcode0101/drift_cult/blob/main/store/templates/store/cart.html) | [https://driftcult.art/cart/](https://driftcult.art/cart/) | ![screenshot](documentation/validation/html-store-cart.png) | Auth required. ✅ Validated |
| store | [checkout.html](https://github.com/Maxcode0101/drift_cult/blob/main/store/templates/store/checkout.html) | [https://driftcult.art/checkout/](https://driftcult.art/checkout/) | ![screenshot](documentation/validation/html-store-checkout.png) | Auth required. ✅ Validated |
| store | [order_confirmation.html](https://github.com/Maxcode0101/drift_cult/blob/main/store/templates/store/order_confirmation.html) | [https://driftcult.art/checkout/success/](https://driftcult.art/checkout/success/) | ![screenshot](documentation/validation/html-store-order_confirmation.png) | Auth required. ✅ Validated |
| store | [profile.html](https://github.com/Maxcode0101/drift_cult/blob/main/store/templates/store/profile.html) | [https://driftcult.art/profile/](https://driftcult.art/profile/) | ![screenshot](documentation/validation/html-store-profile.png) | Auth required. ✅ Validated |
| store | [admin_dashboard.html](https://github.com/Maxcode0101/drift_cult/blob/main/store/templates/store/admin_dashboard.html) | [https://driftcult.art/store/admin-dashboard/](https://driftcult.art/store/admin-dashboard/) | ![screenshot](documentation/validation/html-store-admin_dashboard.png) | Staff only. ✅ Validated |
| store | [admin_order_list.html](https://github.com/Maxcode0101/drift_cult/blob/main/store/templates/store/admin_order_list.html) | [https://driftcult.art/store/admin-dashboard/orders/](https://driftcult.art/store/admin-dashboard/orders/) | ![screenshot](documentation/validation/html-store-admin_order_list.png) | Staff only. ✅ Validated |
| store | [admin_order_detail.html](https://github.com/Maxcode0101/drift_cult/blob/main/store/templates/store/admin_order_detail.html) | https://driftcult.art/store/admin-dashboard/orders/1/` | ![screenshot](documentation/validation/html-store-admin_order_detail.png) | Staff only. ✅ Validated |
| store | [add_product_sizes.html](https://github.com/Maxcode0101/drift_cult/blob/main/store/templates/store/add_product_sizes.html) | https://driftcult.art/store/product/black-classic-trunks/add-sizes/` | ![screenshot](documentation/validation/html-store-add_product_sizes.png) | Staff only. ✅ Validated |
| store | [product_form.html](https://github.com/Maxcode0101/drift_cult/blob/main/store/templates/store/product_form.html) | [https://driftcult.art/store/admin-dashboard/add-product/](https://driftcult.art/store/admin-dashboard/add-product/) | ![screenshot](documentation/validation/html-store-product_form.png) | Staff only. ✅ Validated |
| store | [product_confirm_delete.html](https://github.com/Maxcode0101/drift_cult/blob/main/store/templates/store/product_confirm_delete.html) | https://driftcult.art/store/admin-dashboard/delete-product/3/` | ![screenshot](documentation/validation/html-store-product_confirm_delete.png) | Staff only. ✅ Validated |


### CSS

I have used the recommended [CSS Jigsaw Validator](https://jigsaw.w3.org/css-validator) to validate all of my CSS files.

| Directory | File | URL | Screenshot | Notes |
| --- | --- | --- | --- | --- |
| static | [community.css](https://github.com/Maxcode0101/drift_cult/blob/main/static/css/community.css) | [Validate](https://jigsaw.w3.org/css-validator/validator?uri=https://driftcult.art/static/css/community.css) | ![screenshot](documentation/validation/css-static-community.png) | Valid – no errors |
| store | [custom.css](https://github.com/Maxcode0101/drift_cult/blob/main/store/static/css/custom.css) | [Validate](https://jigsaw.w3.org/css-validator/validator?uri=https://driftcult.art/static/css/custom.css) | ![screenshot](documentation/validation/css-store-custom.png) | Valid – no errors |


### JS

| Directory | File | URL | Screenshot | Notes |
| --- | --- | --- | --- | --- |
| store | [newsletter.js](https://github.com/Maxcode0101/drift_cult/blob/main/store/static/js/newsletter.js) | N/A | ![screenshot](documentation/validation/js-store-newsletter.png) | Bootstrap flagged as undefined (expected) |


### Python

| Directory | File | URL | Screenshot | Notes |
| --- | --- | --- | --- | --- |
| core | [views.py](https://github.com/Maxcode0101/drift_cult/blob/main/core/views.py) | [PEP8 CI Link](https://pep8ci.herokuapp.com/https://raw.githubusercontent.com/Maxcode0101/drift_cult/main/core/views.py) | ![screenshot](documentation/validation/py-core-views.png) | All PEP8 issues fixed including E501 line lengths and html_message formatting |
| store | [views.py](https://github.com/Maxcode0101/drift_cult/blob/main/store/views.py) | [PEP8 CI Link](https://pep8ci.herokuapp.com/https://raw.githubusercontent.com/Maxcode0101/drift_cult/main/store/views.py) | ![screenshot](documentation/validation/py-store-views.png) | All issues fixed – clean validation |
| store | [models.py](https://github.com/Maxcode0101/drift_cult/blob/main/store/models.py) | [PEP8 CI Link](https://pep8ci.herokuapp.com/https://raw.githubusercontent.com/Maxcode0101/drift_cult/main/store/models.py) | ![screenshot](documentation/validation/py-store-models.png) | No issues found |
| store | [forms.py](https://github.com/Maxcode0101/drift_cult/blob/main/store/forms.py) | ✅ No issues after fixing PEP8 warnings | ![screenshot](documentation/validation/py-store-forms.png) | - |
| store | [admin.py](https://github.com/Maxcode0101/drift_cult/blob/main/store/admin.py) | https://pep8ci.herokuapp.com/ | ![screenshot](documentation/validation/pep8-store-admin.png) | No PEP8 errors |
| store | [context_processors.py](https://github.com/Maxcode0101/drift_cult/blob/main/store/context_processors.py) | [PEP8 CI Link](https://pep8ci.herokuapp.com/https://raw.githubusercontent.com/Maxcode0101/drift_cult/main/store/context_processors.py) | ![screenshot](documentation/validation/py-store-context_processors.png) | No errors after refactoring |
| store | [forms.py](https://github.com/Maxcode0101/drift_cult/blob/main/store/forms.py) | [PEP8 CI Link](https://pep8ci.herokuapp.com/https://raw.githubusercontent.com/Maxcode0101/drift_cult/main/
| core | [emails.py](https://github.com/Maxcode0101/drift_cult/blob/main/core/emails.py) | [PEP8 CI Link](https://pep8ci.herokuapp.com/https://raw.githubusercontent.com/Maxcode0101/drift_cult/main/core/emails.py) | ![screenshot](documentation/validation/py-core-emails.png) | No issues after linting. |
| core | [signals.py](https://github.com/Maxcode0101/drift_cult/blob/main/core/signals.py) | [PEP8 CI Link](https://pep8ci.herokuapp.com/https://raw.githubusercontent.com/Maxcode0101/drift_cult/main/core/signals.py) | ![screenshot](documentation/validation/py-core-signals.png) | Clean after fixes |
| core | [urls.py](https://github.com/Maxcode0101/drift_cult/blob/main/core/urls.py) | [PEP8 CI Link](https://pep8ci.herokuapp.com/https://raw.githubusercontent.com/Maxcode0101/drift_cult/main/core/urls.py) | ![screenshot](documentation/validation/py-core-urls.png) | No issues after formatting |
| drift_cult | [urls.py](https://github.com/Maxcode0101/drift_cult/blob/main/drift_cult/urls.py) | [PEP8 CI Link](https://pep8ci.herokuapp.com/https://raw.githubusercontent.com/Maxcode0101/drift_cult/main/drift_cult/urls.py) | ![screenshot](documentation/validation/py-drift_cult-urls.png) | PEP8 compliant |
| store | [sitemaps.py](https://github.com/Maxcode0101/drift_cult/blob/main/store/sitemaps.py) | [PEP8 CI Link](https://pep8ci.herokuapp.com/https://raw.githubusercontent.com/Maxcode0101/drift_cult/main/store/sitemaps.py) | ![screenshot](documentation/validation/py-store-sitemaps.png) | No issues after fixing |
| store | [urls.py](https://github.com/Maxcode0101/drift_cult/blob/main/store/urls.py) | [PEP8 CI Link](https://pep8ci.herokuapp.com/https://raw.githubusercontent.com/Maxcode0101/drift_cult/main/store/urls.py) | ![screenshot](documentation/validation/py-store-urls.png) | No issues after fixing |



## Responsiveness

I've tested my deployed project to check for responsiveness issues.

| Page | Mobile | Tablet | Desktop | Notes |mobile-
| --- | --- | --- | --- | --- |
| Register | ![screenshot](documentation/responsiveness/mobile-register.png) | ![screenshot](documentation/responsiveness/tablet-register.png) | ![screenshot](documentation/responsiveness/desktop-register.png) | Works as expected |
| Login | ![screenshot](documentation/responsiveness/mobile-login.png) | ![screenshot](documentation/responsiveness/tablet-login.png) | ![screenshot](documentation/responsiveness/desktop-login.png) | Works as expected |
| Profile | ![screenshot](documentation/responsiveness/mobile-profile.png) | ![screenshot](documentation/responsiveness/tablet-profile.png) | ![screenshot](documentation/responsiveness/desktop-profile.png) | Works as expected |
| Home | ![screenshot](documentation/responsiveness/mobile-home.png) | ![screenshot](documentation/responsiveness/tablet-home.png) | ![screenshot](documentation/responsiveness/desktop-home.png) | Works as expected |
| Products | ![screenshot](documentation/responsiveness/mobile-products.png) | ![screenshot](documentation/responsiveness/tablet-products.png) | ![screenshot](documentation/responsiveness/desktop-products.png) | Works as expected |
| Product Details | ![screenshot](documentation/responsiveness/mobile-product-details.png) | ![screenshot](documentation/responsiveness/tablet-product-details.png) | ![screenshot](documentation/responsiveness/desktop-product-details.png) | Works as expected |
| Bag | ![screenshot](documentation/responsiveness/mobile-bag.png) | ![screenshot](documentation/responsiveness/tablet-bag.png) | ![screenshot](documentation/responsiveness/desktop-bag.png) | Works as expected |
| Checkout | ![screenshot](documentation/responsiveness/mobile-checkout.png) | ![screenshot](documentation/responsiveness/tablet-checkout.png) | ![screenshot](documentation/responsiveness/desktop-checkout.png) | Works as expected |
| Checkout Success | ![screenshot](documentation/responsiveness/mobile-checkout-success.png) | ![screenshot](documentation/responsiveness/tablet-checkout-success.png) | ![screenshot](documentation/responsiveness/desktop-checkout-success.png) | Works as expected |
| Add Product | ![screenshot](documentation/responsiveness/mobile-add-product.png) | ![screenshot](documentation/responsiveness/tablet-add-product.png) | ![screenshot](documentation/responsiveness/desktop-add-product.png) | Works as expected |
| Edit Product | ![screenshot](documentation/responsiveness/mobile-edit-product.png) | ![screenshot](documentation/responsiveness/tablet-edit-product.png) | ![screenshot](documentation/responsiveness/desktop-edit-product.png) | Works as expected |
| Newsletter | ![screenshot](documentation/responsiveness/mobile-newsletter.png) | ![screenshot](documentation/responsiveness/tablet-newsletter.png) | ![screenshot](documentation/responsiveness/desktop-newsletter.png) | Works as expected |
| Contact | ![screenshot](documentation/responsiveness/mobile-contact.png) | ![screenshot](documentation/responsiveness/tablet-contact.png) | ![screenshot](documentation/responsiveness/desktop-contact.png) | Works as expected |
| 404 | ![screenshot](documentation/responsiveness/mobile-404.png) | ![screenshot](documentation/responsiveness/tablet-404.png) | ![screenshot](documentation/responsiveness/desktop-404.png) | Works as expected |


## Browser Compatibility

I've tested my deployed project on multiple browsers to check for compatibility issues.

| Page | Chrome | Firefox | Safari | Notes |
| --- | --- | --- | --- | --- |
| Register | ![screenshot](documentation/browsers/chrome-register.png) | ![screenshot](documentation/browsers/firefox-register.png) | ![screenshot](documentation/browsers/safari-register.png) | Works as expected |
| Login | ![screenshot](documentation/browsers/chrome-login.png) | ![screenshot](documentation/browsers/firefox-login.png) | ![screenshot](documentation/browsers/safari-login.png) | Works as expected |
| Profile | ![screenshot](documentation/browsers/chrome-profile.png) | ![screenshot](documentation/browsers/firefox-profile.png) | ![screenshot](documentation/browsers/safari-profile.png) | Works as expected |
| Home | ![screenshot](documentation/browsers/chrome-home.png) | ![screenshot](documentation/browsers/firefox-home.png) | ![screenshot](documentation/browsers/safari-home.png) | Works as expected |
| Products | ![screenshot](documentation/browsers/chrome-products.png) | ![screenshot](documentation/browsers/firefox-products.png) | ![screenshot](documentation/browsers/safari-products.png) | Works as expected |
| Product Details | ![screenshot](documentation/browsers/chrome-product-details.png) | ![screenshot](documentation/browsers/firefox-product-details.png) | ![screenshot](documentation/browsers/safari-product-details.png) | Works as expected |
| Bag | ![screenshot](documentation/browsers/chrome-bag.png) | ![screenshot](documentation/browsers/firefox-bag.png) | ![screenshot](documentation/browsers/safari-bag.png) | Works as expected |
| Checkout | ![screenshot](documentation/browsers/chrome-checkout.png) | ![screenshot](documentation/browsers/firefox-checkout.png) | ![screenshot](documentation/browsers/safari-checkout.png) | Works as expected |
| Checkout Success | ![screenshot](documentation/browsers/chrome-checkout-success.png) | ![screenshot](documentation/browsers/firefox-checkout-success.png) | ![screenshot](documentation/browsers/safari-checkout-success.png) | Works as expected |
| Add Product | ![screenshot](documentation/browsers/chrome-add-product.png) | ![screenshot](documentation/browsers/firefox-add-product.png) | ![screenshot](documentation/browsers/safari-add-product.png) | Works as expected |
| Edit Product | ![screenshot](documentation/browsers/chrome-edit-product.png) | ![screenshot](documentation/browsers/firefox-edit-product.png) | ![screenshot](documentation/browsers/safari-edit-product.png) | Works as expected |
| Newsletter | ![screenshot](documentation/browsers/chrome-newsletter.png) | ![screenshot](documentation/browsers/firefox-newsletter.png) | ![screenshot](documentation/browsers/safari-newsletter.png) | Works as expected |
| Contact | ![screenshot](documentation/browsers/chrome-contact.png) | ![screenshot](documentation/browsers/firefox-contact.png) | ![screenshot](documentation/browsers/safari-contact.png) | Works as expected |
| 404 | ![screenshot](documentation/browsers/chrome-404.png) | ![screenshot](documentation/browsers/firefox-404.png) | ![screenshot](documentation/browsers/safari-404.png) | Works as expected |


## Defensive Programming

Defensive programming was manually tested with the below user acceptance testing:

| Page | Expectation | Test | Result | Screenshot |
| --- | --- | --- | --- | --- |
| Products | Feature is expected to allow users to browse products without registration. | Opened product pages as a guest user. | Products were fully accessible without requiring registration. | ![screenshot](documentation/defensive/products.png) |
| | Feature is expected to sort products by category. | Tested sorting options for category (T-Shirts) | Sorting worked correctly for all options. | ![screenshot](documentation/defensive/sorting.png) |
| | Feature is expected to show detailed product information. | Clicked on individual products to view details. | Product details (description, price, image) were displayed correctly. | ![screenshot](documentation/defensive/product-details.png) |
| Shopping Cart | Feature is expected to allow customers to add items to the cart with quantity controls. | Added products to the cart and adjusted quantities. | Items were added successfully, and quantities updated as expected. | ![screenshot](documentation/defensive/add-to-cart.png) |
| | Feature is expected to allow customers to view and manage their cart. | Opened the cart page and edited cart contents. | Cart contents were displayed, updated, and removed correctly. | ![screenshot](documentation/defensive/manage-cart.png) |
| Checkout | Feature is expected to display cart items, grand total, and input fields for checkout. | Proceeded to checkout with items in the cart. | Checkout page displayed cart items, total, and input fields as expected. | ![screenshot](documentation/defensive/checkout.png) |
| | Feature is expected to allow secure payment via Stripe. | Entered valid card details using Stripe at checkout. | Payment was processed securely, and an order confirmation page was displayed. | ![screenshot](documentation/defensive/stripe-payment.png) |
| | Feature is expected to send a confirmation email after purchase. | Completed a purchase and checked email inbox. | Confirmation email was received with order details. | ![screenshot](documentation/defensive/confirmation-email.png) |
| | Feature is expected to display an order confirmation page with an order number. | Completed a purchase. | Order confirmation page displayed successfully with an order number. | ![screenshot](documentation/defensive/order-confirmation.png) |
| Account Management | Feature is expected to allow returning customers to log in and view past orders. | Logged in as a returning customer and accessed order history. | Past orders were displayed correctly in the account section. | ![screenshot](documentation/defensive/order-history.png) |
| Admin Features | Feature is expected to allow the site owner to create new products. | Created new products with valid data (name, price, description, image, category). | Products were added successfully and displayed on the site. | ![screenshot](documentation/defensive/create-product.png) |
| | Feature is expected to allow the site owner to update product details. | Edited product details as an admin user. | Product updates were saved and displayed correctly. | ![screenshot](documentation/defensive/update-product.png) |
| | Feature is expected to allow the site owner to delete products. | Deleted a product from the inventory. | Product was removed successfully from the site, after being prompted to confirm first. | ![screenshot](documentation/defensive/delete-product.png) |
| Orders | Feature is expected to allow the site owner to view all orders placed. | Accessed the orders dashboard as an admin user. | All orders were displayed correctly. | ![screenshot](documentation/defensive/view-orders.png) |
| Newsletter | Feature is expected to allow users to sign up for the newsletter. | Submitted valid email addresses for newsletter registration. | Email addresses were successfully added to the newsletter list. | ![screenshot](documentation/defensive/newsletter.png) |
| 404 Error Page | Feature is expected to display a 404 error page for non-existent pages. | Navigated to an invalid URL (e.g., `/test`). | A custom 404 error page was displayed as expected. | ![screenshot](documentation/defensive/404.png) |


## Bugs

---

### Fixed Bugs

- **Order confirmation bug**: After checkout, the onsite order confirmation page displayed the wrong items, total price, or 0.00€. This was caused by cart/session logic breaking after payment. Fixed by rewriting cart clearing and order rendering logic.
- **Stripe webhook integration**: Webhooks were not marking orders as paid or sending confirmation emails. This was caused by misconfigured routing and missing metadata. Fixed by moving webhook to `core/views.py` and ensuring `order_id` was passed in session metadata.
- **Meta tag duplication**: Pages that used `{% block extra_meta %}` were causing HTML validation errors due to duplicate `<meta name="description">`. Fixed by removing the static description from `base.html`.
- **Invalid label for attribute**: `admin_order_detail.html` had a `<label>` with a `for="status"` attribute that didn’t match any input ID. Fixed by adding the correct `id="status"` to the `<select>`.
- **Newsletter signup AJAX**: There were two duplicate views named `newsletter_signup_ajax` which caused the actual email to not send. One was removed and the logic was consolidated.
- **Session/cart inconsistencies**: Deleting a product that was in someone's cart led to session errors. Fixed by checking for existence before rendering cart items.
- **PEP8 issues**: Long lines, missing blank lines, and spacing inconsistencies across Python files were flagged by the CI linter. These were all fixed manually using bracket wrapping and comment spacing.
- **Sitemap 500 error**: The `ProductSitemap` used an unordered queryset, which caused a server error. Adding `.order_by('id')` resolved the issue.
- **Robots.txt and 404.html deletion**: During a full file overwrite, essential files were accidentally removed. Recovered from Git history and restored.
- **Product image fallback**: Locally, missing product images caused broken pages due to empty `/media/` folder. Fixed by implementing a fallback to `/static/images/placeholder.png`.

---

### Unfixed Bugs

[![GitHub issues](https://img.shields.io/github/issues/Maxcode0101/drift_cult)](https://www.github.com/Maxcode0101/drift_cult/issues)

Any remaining open issues can be tracked [here](https://www.github.com/Maxcode0101/drift_cult/issues).

---

### Known Issues

| Issue | Notes |
| --- | --- |
| Horizontal scrolling on <375px devices | Affects very small screens; CSS fix was not prioritized. |
| `<section>` element W3C warning | Missing heading (`h2-h6`) warning appears during validation, but is semantically acceptable in this context. |
| Django Allauth HTML validation errors | Signup/login templates generated by Allauth fail W3C checks, but the logic is functional. |
| Checkout success page can be brute-forced | If someone knows a valid order number, they can potentially access the success page URL. |
| Deleted products still exist in cart session | If a product is removed from the database but is in someone's cart, it causes a crash. |


> [!IMPORTANT]
> There are no remaining bugs that I am aware of, though, even after thorough testing, I cannot rule out the possibility.
